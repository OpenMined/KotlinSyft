apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'kotlinx-serialization'
apply plugin: 'kotlin-android-extensions'
apply from: 'publish.gradle'

android {
    compileSdkVersion Versions.compileSdk
    buildToolsVersion Versions.buildTools


    defaultConfig {
        minSdkVersion Versions.minSdk
        targetSdkVersion Versions.targetSdk
        versionCode Versions.appVersionCode
        versionName Versions.appVersionName

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        consumerProguardFiles 'consumer-rules.pro'
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility = 1.8
        targetCompatibility = 1.8
    }

    testOptions {
        unitTests.returnDefaultValues = true
    }

    lintOptions {
        lintConfig file("lint.xml")
    }

    packagingOptions {
        exclude 'META-INF/LICENSE.md'
        exclude 'META-INF/LICENSE-notice.md'
    }
}

dependencies {
    implementation SyftlibDependencies.kotlinJDK
    implementation CommonDependencies.appCompat
    implementation CommonDependencies.coreKtx
    implementation CommonDependencies.kotlinSerialization
    implementation SyftlibDependencies.webrtc
    implementation CommonDependencies.rxJava
    implementation CommonDependencies.rxAndroid
    implementation SyftlibDependencies.okhttp

    implementation SyftlibDependencies.syftProto
    implementation SyftlibDependencies.protobuf

    debugImplementation SyftlibDependencies.mockitoJupiter

    androidTestImplementation CommonDependencies.testExtJunit
    androidTestImplementation CommonDependencies.espresso
    testImplementation SyftlibDependencies.junitJupiter
    testImplementation SyftlibDependencies.mockitoCore
    testImplementation SyftlibDependencies.mockitoKotlin
}

apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'kotlinx-serialization'
apply plugin: 'kotlin-android-extensions'
apply from: 'publish.gradle'

android {
    compileSdkVersion Versions.compileSdk
    buildToolsVersion Versions.buildTools


    defaultConfig {
        minSdkVersion Versions.minSdk
        targetSdkVersion Versions.targetSdk
        versionCode Versions.appVersionCode
        versionName Versions.appVersionName

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        consumerProguardFiles 'consumer-rules.pro'
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility = 1.8
        targetCompatibility = 1.8
    }

    testOptions {
        unitTests.returnDefaultValues = true
    }

    lintOptions {
        lintConfig file("lint.xml")
    }

    packagingOptions {
        exclude 'META-INF/LICENSE.md'
        exclude 'META-INF/LICENSE-notice.md'
    }
}

dependencies {
    implementation SyftlibDependencies.kotlinJDK
    implementation SyftlibDependencies.appCompat
    implementation SyftlibDependencies.corektx
    implementation SyftlibDependencies.kotlinSerialization

    implementation SyftlibDependencies.webrtc
    implementation SyftlibDependencies.rxJava
    implementation SyftlibDependencies.rxAndroid
    implementation SyftlibDependencies.okhttp

    implementation SyftlibDependencies.syft
    implementation SyftlibDependencies.protobuf

    debugImplementation SyftlibDependencies.mokitoJupiter

    androidTestImplementation SyftlibDependencies.testExtJunit
    androidTestImplementation SyftlibDependencies.espresso
    testImplementation SyftlibDependencies.junitJupiter
    testImplementation SyftlibDependencies.mokitoCore
    testImplementation SyftlibDependencies.mokitoKotlin
}
